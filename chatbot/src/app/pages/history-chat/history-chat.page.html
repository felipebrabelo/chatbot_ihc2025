<div class="lotus-container" [class.dark-mode]="isDarkMode">
  <!-- Sidebar -->
  <div class="sidebar" [class.minimized]="isMenuMinimized">
    <div class="sidebar-header">
      <h2>Chat</h2>
    </div>

    <!-- Menu Principal -->
    <div class="main-menu">
      <div class="menu-item" (click)="goToHome()">
        <ion-icon name="chatbubble-outline"></ion-icon>
        <span>Novo Chat</span>
      </div>
      <div class="menu-item" (click)="goToExercises()">
        <ion-icon name="fitness-outline"></ion-icon>
        <span>Exercícios</span>
      </div>
      <div class="menu-item" (click)="goToBreathing()">
        <ion-icon name="flower-outline"></ion-icon>
        <span>Respiração</span>
      </div>
      <div class="menu-item" (click)="goToReport()">
        <ion-icon name="stats-chart-outline"></ion-icon>
        <span>Relatórios</span>
      </div>
    </div>

    <!-- Info da Conversa -->
    <div class="conversation-info">
      <div class="info-header">
        <ion-icon name="time-outline"></ion-icon>
        <h3>Conversa Anterior</h3>
      </div>
      <div class="info-content">
        <p class="info-title">{{ conversation?.title }}</p>
        <p class="info-date">{{ conversation?.date }}</p>
      </div>
    </div>

    <!-- Footer Settings -->
    <div class="sidebar-footer">
      <div class="footer-item" (click)="toggleDarkMode()">
        <ion-icon [name]="isDarkMode ? 'sunny-outline' : 'moon-outline'"></ion-icon>
        <span>{{ isDarkMode ? 'Modo Claro' : 'Modo Noturno' }}</span>
      </div>
      <div class="footer-item" (click)="toggleMenu()">
        <ion-icon [name]="isMenuMinimized ? 'chevron-forward-outline' : 'chevron-back-outline'"></ion-icon>
        <span>{{ isMenuMinimized ? 'Expandir' : 'Minimizar' }}</span>
      </div>
    </div>
  </div>

  <!-- Conteúdo Principal -->
  <div class="main-content">
    <!-- Header -->
    <div class="content-header">
      <div class="header-left">
        <ion-button class="back-button" fill="clear" (click)="goToHome()">
          <ion-icon name="arrow-back-outline"></ion-icon>
        </ion-button>
        <h1>LÓTUS <ion-icon name="chatbubble-ellipses-outline" class="lotus-icon"></ion-icon></h1>
      </div>
      <ion-button class="sos-button" fill="solid">
        SOS
      </ion-button>
    </div>

    <!-- Chat Area -->
    <div class="chat-area" #chatContainer>
      <div class="chat-messages">
        <div class="message" *ngFor="let msg of messages" [class.user-message]="msg.sender === 'user'" [class.bot-message]="msg.sender === 'bot'">
          <div class="message-avatar" *ngIf="msg.sender === 'bot'">
            <ion-icon name="flower-outline"></ion-icon>
          </div>
          <div class="message-content">
            <p>{{ msg.text }}</p>
          </div>
          <div class="message-avatar" *ngIf="msg.sender === 'user'">
            <ion-icon name="person-circle-outline"></ion-icon>
          </div>
        </div>

        <!-- Indicador de digitação -->
        <div class="message bot-message" *ngIf="isTyping">
          <div class="message-avatar">
            <ion-icon name="flower-outline"></ion-icon>
          </div>
          <div class="message-content typing-indicator">
            <div class="typing-dots">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Input Area -->
    <div class="input-area">
      <div class="input-container">
        <ion-button class="attach-button" fill="clear">
          <ion-icon name="add-circle-outline"></ion-icon>
        </ion-button>
        
        <div class="message-input">
          <input 
            type="text" 
            [(ngModel)]="userMessage" 
            placeholder="Digite sua mensagem..."
            (keyup.enter)="sendMessage()"
          />
        </div>

        <ion-button class="send-button" fill="clear" (click)="sendMessage()">
          <ion-icon name="send"></ion-icon>
        </ion-button>

        <ion-button class="mic-button" fill="clear">
          <ion-icon name="mic-outline"></ion-icon>
        </ion-button>
      </div>
    </div>
  </div>
</div>
