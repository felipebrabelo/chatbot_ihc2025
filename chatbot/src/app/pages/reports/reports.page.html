<div class="lotus-container" [class.dark-mode]="isDarkMode">
  <!-- Sidebar -->
  <div class="sidebar" [class.minimized]="isMenuMinimized">
    <div class="sidebar-header">
      <h2>Home</h2>
    </div>

    <!-- Menu Principal -->
    <div class="main-menu">
      <div class="menu-item" (click)="newChat()">
        <ion-icon name="chatbubble-outline"></ion-icon>
        <span>Novo Chat</span>
      </div>
      <div class="menu-item" (click)="goToExercises()">
        <ion-icon name="fitness-outline"></ion-icon>
        <span>Exercícios</span>
      </div>
      <div class="menu-item" (click)="goToBreathing()">
        <ion-icon name="flower-outline"></ion-icon>
        <span>Respiração</span>
      </div>
      <div class="menu-item active" (click)="goToReport()">
        <ion-icon name="stats-chart-outline"></ion-icon>
        <span>Relatórios</span>
      </div>
    </div>

    <!-- Histórico -->
    <div class="history-section">
      <h3>Histórico</h3>
      <div class="history-item" *ngFor="let week of weeks">
        <div class="history-main" (click)="selectWeek(week)">
          <div class="history-title">{{ week.title }}</div>
          <div class="history-date">{{ week.date }}</div>
          <div class="history-preview">{{ week.preview }}</div>
        </div>
        <ion-button class="open-chat-button" fill="solid" (click)="openConversationPage(week); $event.stopPropagation()">
          Abrir
        </ion-button>
      </div>
    </div>

    <!-- Footer Settings -->
    <div class="sidebar-footer">
      <div class="footer-item" (click)="goToTemporaryChat()">
        <ion-icon name="person-outline"></ion-icon>
        <span>Entrar</span>
      </div>
      <div class="footer-item" (click)="toggleDarkMode()">
        <ion-icon [name]="isDarkMode ? 'sunny-outline' : 'moon-outline'"></ion-icon>
        <span>{{ isDarkMode ? 'Modo Claro' : 'Modo Noturno' }}</span>
      </div>
      <div class="footer-item" (click)="toggleMenu()">
        <ion-icon [name]="isMenuMinimized ? 'chevron-forward-outline' : 'chevron-back-outline'"></ion-icon>
        <span>{{ isMenuMinimized ? 'Expandir' : 'Minimizar' }}</span>
      </div>
    </div>
  </div>

  <!-- Conteúdo Principal -->
  <div class="main-content">
    <!-- Header -->
    <div class="content-header">
      <h1>LÓTUS <ion-icon name="stats-chart-outline" class="lotus-icon"></ion-icon></h1>
      <div class="header-buttons">
        <ion-button class="email-report-button" fill="solid" (click)="sendReportByEmail()">
          <ion-icon name="mail-outline" slot="start"></ion-icon>
          Receber Relatório por Email
        </ion-button>
        <ion-button class="sos-button" fill="solid">
          SOS
        </ion-button>
      </div>
    </div>

    <!-- Reports Area -->
    <div class="reports-area">
      
      <!-- Gráficos -->
      <div class="charts-section">
        <h2 class="section-title">Estatísticas da Semana</h2>
        
        <div class="charts-grid">
          <!-- Gráfico de Humor -->
          <div class="chart-card">
            <div class="chart-header">
              <ion-icon name="happy-outline"></ion-icon>
              <h3>Humor</h3>
            </div>
            <div class="chart-content">
              <canvas id="moodChart"></canvas>
            </div>
            <div class="chart-stats">
              <div class="stat-item">
                <span class="stat-label">Média</span>
                <span class="stat-value">{{ moodAverage }}/5</span>
              </div>
            </div>
          </div>

          <!-- Interações Realizadas -->
          <div class="chart-card">
            <div class="chart-header">
              <ion-icon name="chatbubbles-outline"></ion-icon>
              <h3>Interações Realizadas</h3>
            </div>
            <div class="chart-content">
              <canvas id="interactionsChart"></canvas>
            </div>
            <div class="chart-stats">
              <div class="stat-item">
                <span class="stat-label">Total</span>
                <span class="stat-value">{{ totalInteractions }}</span>
              </div>
            </div>
          </div>

          <!-- Tempo de Conversa -->
          <div class="chart-card">
            <div class="chart-header">
              <ion-icon name="time-outline"></ion-icon>
              <h3>Tempo de Conversa</h3>
            </div>
            <div class="chart-content">
              <canvas id="timeChart"></canvas>
            </div>
            <div class="chart-stats">
              <div class="stat-item">
                <span class="stat-label">Total</span>
                <span class="stat-value">{{ totalTime }} min</span>
              </div>
            </div>
          </div>

          <!-- Pico de Atividade -->
          <div class="chart-card">
            <div class="chart-header">
              <ion-icon name="pulse-outline"></ion-icon>
              <h3>Pico de Atividade</h3>
            </div>
            <div class="chart-content">
              <canvas id="activityChart"></canvas>
            </div>
            <div class="chart-stats">
              <div class="stat-item">
                <span class="stat-label">Horário</span>
                <span class="stat-value">{{ peakHour }}h</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Seção Comunicação -->
      <div class="section">
        <h2 class="section-title">Comunicação</h2>
        
        <div class="cards-container">
          <div class="tip-card" *ngFor="let tip of comunicacaoTips">
            <div class="card-header">
              <h3>{{ tip.title }}</h3>
            </div>
            <p class="card-description">{{ tip.description }}</p>
            <div class="card-footer">
              <div class="footer-item">
                <ion-icon name="heart-outline"></ion-icon>
                <span>{{ tip.likes }}</span>
              </div>
              <div class="footer-item">
                <ion-icon name="time-outline"></ion-icon>
                <span>{{ tip.readTime }} min</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Seção Rotinas de Sono -->
      <div class="section">
        <h2 class="section-title">Rotinas de Sono</h2>
        
        <div class="cards-container">
          <div class="tip-card" *ngFor="let tip of sonoTips">
            <div class="card-header">
              <h3>{{ tip.title }}</h3>
            </div>
            <p class="card-description">{{ tip.description }}</p>
            <div class="card-footer">
              <div class="footer-item">
                <ion-icon name="heart-outline"></ion-icon>
                <span>{{ tip.likes }}</span>
              </div>
              <div class="footer-item">
                <ion-icon name="time-outline"></ion-icon>
                <span>{{ tip.readTime }} min</span>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
